#!/bin/sh

# An HTTP server emulator which starts a capture
# once an incoming connection is established.

http_headers='HTTP/1.1 200 OK
Server: Rover (socat-based)
Content-Type: video/H264

'
exec socat TCP-LISTEN:"${1?listen port}",reuseaddr,fork \
	EXEC:"$(cd "$(dirname "$0")" || exit; pwd)/capture '$http_headers'"
